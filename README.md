# php-amqp-arc
php-amqplib实践

------------------------------

### 本次实践主要包括三个部分

#### 1. consumer消费者
- 创建mq连接
- 定义队列
- 将接收到的数据放到回调函数进行处理
	- 对接收到的数据进行预处理
	- 将接收到的数据放到回调函数
	- 对回调函数返回的数据进行处理
- 对消费者进行ack回复并根据实际需要进行阻塞等操作
- 队列保持

#### 2. producer生产者
- 创建mq队列
- 对发送的数据进行预处理
- 将消息放到消息队列

#### 3. worker消息队列程序
- 根据需要配置回调本地程序或者远端程序
- 获取生产者端传递的参数，进行数据处理
- 返回数据到消费者

--------------------------------------

### Record

+ 相关日志和记录
+ 消费者和消息队列的脚本一键重启
+ demo使用curl调用，可以避免消息队列重启造成的消息数据丢失
